<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_account_form" model="ir.ui.view">
            <field name="name">account.account.form</field>
            <field name="model">account.account</field>
            <field name="arch" type="xml">
                <form string="Account">
                   <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" name="account.action_move_line_select"
                                string="Journal Items" type="action" icon="fa-bars"/>
                        </div>
                       <group>
                           <group>
                             <field name="code" placeholder="code"/>
                             <field name="name"/>
                             <field name="user_type_id" widget="account_hierarchy_selection"/>
                             <field name="tax_ids" widget="many2many_tags" domain="[('company_id','=',company_id)]" attrs="{'invisible': [('internal_group', '=', 'off_balance')]}"/>
                             <field name="tag_ids" widget="many2many_tags" domain="[('applicability', '!=', 'taxes')]" context="{'default_applicability': 'accounts'}" options="{'no_create_edit': True}"/>
                             <field name="group_id"/>
                             <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                             <field name="currency_id" options="{'no_create': True}" groups="base.group_multi_currency"/>
                             <field name="internal_type" invisible="1" readonly="1"/>
                             <field name="internal_group" invisible="1" readonly="1"/>
                             <label for="reconcile" attrs="{'invisible': ['|', ('internal_type','=','liquidity'), ('internal_group', '=', 'off_balance')]}"/>
                             <div attrs="{'invisible': ['|', ('internal_type','=','liquidity'), ('internal_group', '=', 'off_balance')]}">
                                <field name="reconcile"/>
                                <button name="action_open_reconcile" class="oe_link" type="object" string=" -> Reconcile" attrs="{'invisible': [('reconcile', '=', False)]}"/>
                             </div>
                             <field name="deprecated"/>
                           </group>
                       </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_account_list" model="ir.ui.view">
            <field name="name">account.account.list</field>
            <field name="model">account.account</field>
            <field name="arch" type="xml">
                <tree string="Chart of accounts">
                    <field name="code"/>
                    <field name="name"/>
                    <field name="user_type_id"/>
                    <field name="currency_id" options="{'no_create': True}" groups="base.group_multi_currency"/>
                    <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                </tree>
            </field>
        </record>

        <record id="view_account_account_kanban" model="ir.ui.view">
            <field name="name">account.account.kanban</field>
            <field name="model">account.account</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="user_type_id"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_global_click">
                                <div class="row">
                                    <div class="col-6">
                                        <strong><field name="name"/></strong>
                                    </div>
                                    <div class="col-6 text-right">
                                        <span class="badge badge-pill"><t t-esc="record.code.value"/></span>
                                    </div>
                                </div>
                                <div>
                                    <strong>Type: </strong><t t-esc="record.user_type_id.value"/>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="view_account_search" model="ir.ui.view">
            <field name="name">account.account.search</field>
            <field name="model">account.account</field>
            <field name="arch" type="xml">
                <search string="Accounts">
                    <field name="name" filter_domain="['|', ('name','ilike',self), ('code','=like',str(self)+'%')]" string="Account"/>
                    <filter string="Receivable Accounts" name="receivableacc" domain="[('internal_type','=','receivable')]"/>
                    <filter string="Payable Accounts" name="payableacc" domain="[('internal_type','=','payable')]"/>
                    <filter string="Equity" name="equityacc" domain="[('internal_group','=', 'equity')]"/>
                    <filter string="Assets" name="assetsacc" domain="[('internal_group','=', 'asset')]"/>
                    <filter string="Liability" name="liabilityacc" domain="[('internal_group','=', 'liability')]"/>
                    <filter string="Income" name="incomeacc" domain="[('internal_group','=', 'income')]"/>
                    <filter string="Expenses" name="expensesacc" domain="[('internal_group','=', 'expense')]"/>
                    <separator/>
                    <filter string="Account with Entries" name="used" domain="[('used', '=', True)]"/>
                    <separator/>
                    <field name="user_type_id"/>
                    <group expand="0" string="Group By">
                        <filter string="Account Type" name="accounttype" domain="" context="{'group_by':'user_type_id'}"/>
                    </group>
                    <searchpanel class="account_root">
                        <field name="root_id" icon="fa-filter"/>
                    </searchpanel>
                </search>
            </field>
        </record>

        <record id="action_account_form" model="ir.actions.act_window">
            <field name="name">Chart of Accounts</field>
            <field name="res_model">account.account</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="search_view_id" ref="view_account_search"/>
            <field name="view_id" ref="view_account_list"/>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Add a new account
              </p><p>
                An account is part of a ledger allowing your company
                to register all kinds of debit and credit transactions.
                Companies present their annual accounts in two main parts: the
                balance sheet and the income statement (profit and loss
                account). The annual accounts of a company are required by law
                to disclose a certain amount of information.
              </p>
            </field>
        </record>

        <menuitem action="action_account_form" id="menu_action_account_form" parent="account.account_account_menu" groups="account.group_account_user" sequence="1"/>

        <record id="action_duplicate_account" model="ir.actions.server">
            <field name="name">Duplicate</field>
            <field name="model_id" ref="model_account_account"/>
            <field name="binding_model_id" ref="account.model_account_account"/>
            <field name="binding_view_types">list</field>
            <field name="state">code</field>
            <field name="code">
                action = model.action_duplicate_accounts()
            </field>
        </record>

        <!-- Account Journal -->
        <record id="view_account_journal_tree" model="ir.ui.view">
            <field name="name">account.journal.tree</field>
            <field name="model">account.journal</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <tree string="Account Journal">
                    <field name='sequence' widget='handle'/>
                    <field name="name"/>
                    <field name="type"/>
                    <field name="journal_group_ids" widget="many2many_tags" readonly="1"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                </tree>
            </field>
        </record>

        <record id="account_journal_view_kanban" model="ir.ui.view">
            <field name="name">account.journal.kanban</field>
            <field name="model">account.journal</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_content oe_kanban_global_click">
                                <div class="row">
                                    <div class="col-6">
                                        <strong><field name="name"/></strong>
                                    </div>
                                    <div class="col-6">
                                        <span class="float-right"><field name="type"/></span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="view_account_journal_search" model="ir.ui.view">
            <field name="name">account.journal.search</field>
            <field name="model">account.journal</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <search string="Search Account Journal">
                    <field name="name" string="Journal" filter_domain="['|', ('name', 'ilike', self), ('code', 'ilike', self)]"/>
                    <filter name="dashboard" string="Favorites" domain="[('show_on_dashboard', '=', True)]"/>
                    <separator/>
                    <filter name="sales" string="Sales" domain="[('type', '=', 'sale')]"/>
                    <filter name="purchases" string="Purchases" domain="[('type', '=', 'purchase')]"/>
                    <filter name="liquidity" string="Liquidity" domain="['|', ('type', '=', 'cash'), ('type', '=', 'bank')]"/>
                    <filter name="miscellaneous" string="Miscellaneous" domain="[('type', 'not in', ['sale', 'purchase', 'cash', 'bank'])]"/>
                    <separator/>
                    <filter name="inactive" string="Archived" domain="[('active', '=', False)]"/>
                </search>
            </field>
        </record>

        <record id="view_account_journal_group_tree" model="ir.ui.view">
            <field name="name">account.journal.group.tree</field>
            <field name="model">account.journal.group</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <tree editable="bottom">
                    <field name="sequence"  widget="handle"/>
                    <field name="name"/>
                    <field name="excluded_journal_ids" widget="many2many_tags" options="{'no_create': True}"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                </tree>
            </field>
        </record>

        <record id="view_account_journal_group_form" model="ir.ui.view">
            <field name="name">account.journal.group.form</field>
            <field name="model">account.journal.group</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <form string="Journal Groups">
                    <sheet>
                        <group>
                            <field name="name" placeholder="e.g. GAAP, IFRS, ..."/>
                            <field name="excluded_journal_ids" widget="many2many_tags" options="{'no_create': True}"/>
                            <field name="sequence" groups="base.group_no_one"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_account_journal_form" model="ir.ui.view">
            <field name="name">account.journal.form</field>
            <field name="model">account.journal</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <form string="Account Journal">
                    <sheet>
                        <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only"/>
                            <h1><field name="name" class="oe_inline"/></h1>
                        </div>
                        <group>
                            <group>
                                <field name="active" invisible="1"/>
                                <field name="type"/>
                            </group>
                            <group>
                                <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                            </group>
                        </group>
                        <notebook>
                            <page name="bank_account" string="Bank Account" attrs="{'invisible': [('type', '!=', 'bank')]}">
                                <group>
                                    <group>
                                        <field name="company_partner_id" invisible="1"/>
                                        <field name="bank_account_id" context="{'default_partner_id': company_partner_id, 'form_view_ref': 'account.view_company_partner_bank_form'}"/>
                                        <field name="bank_id"/>
                                    </group>
                                    <group >
                                        <field name="bank_statements_source" widget="radio" attrs="{'required': [('type', '=', 'bank')]}"  groups="account.group_account_user"/>
                                    </group>
                                </group>
                            </page>
                            <page name="journal_entries" string="Journal Entries">
                                <group>
                                    <group>
                                        <field name="code"/>
                                        <label for="sequence_number_next"/>
                                        <div>
                                            <field name="sequence_number_next" style="padding-right: 1.0em"/>
                                            <field name="sequence_id" required="0"
                                                   attrs="{'readonly': 1}" groups="base.group_no_one"/>
                                        </div>
                                        <field name="refund_sequence"
                                               attrs="{'invisible': [('type', 'not in', ['sale', 'purchase'])]}"
                                               groups="base.group_no_one"/>
                                        <label for="refund_sequence_number_next"
                                               attrs="{'invisible': ['|',('type', 'not in', ['sale', 'purchase']), ('refund_sequence', '!=', True)]}"/>
                                        <div attrs="{'invisible': ['|',('type', 'not in', ['sale', 'purchase']), ('refund_sequence', '!=', True)]}">
                                            <field name="refund_sequence_number_next" style="padding-right: 1.0em"/>
                                            <field name="refund_sequence_id" required="0"
                                                   attrs="{'readonly': 1}" groups="base.group_no_one"/>
                                        </div>
                                    </group>
                                    <group>
                                        <field name="default_debit_account_id" options="{'no_create': True}" domain="[('deprecated', '=', False)]" groups="account.group_account_user"/>
                                        <field name="default_credit_account_id" options="{'no_create': True}" domain="[('deprecated', '=', False)]" groups="account.group_account_user"/>
                                        <field name="currency_id" options="{'no_create': True}" groups="base.group_multi_currency"/>
                                    </group>
                                </group>
                            </page>
                            <page name="advanced_settings" string="Advanced Settings">
                                <group>
                                    <group string="Payment References" attrs="{'invisible': [('type', '!=', 'sale')]}">
                                        <field name="invoice_reference_type"/>
                                        <field name="invoice_reference_model" attrs="{'invisible': [('invoice_reference_type', '=', 'none')]}"/>
                                    </group>
                                    <group name="group_alias" string="Email your Invoices/Bills" attrs="{'invisible': [('type', 'not in',  ('sale' ,'purchase'))]}">
                                        <label string="Email Alias" attrs="{'invisible': [('alias_domain', '=', False)]}" for="alias_id"/>
                                        <div name="alias_def" attrs="{'invisible': [('alias_domain', '=', False)]}">
                                            <field name="alias_id" class="oe_read_only oe_inline"/>
                                            <div class="oe_edit_only oe_inline" name="edit_alias" style="display: inline;" >
                                                <field name="alias_name" class="oe_inline"/>@<field name="alias_domain" class="oe_inline" readonly="1"/>
                                            </div>
                                        </div>
                                        <div class="content-group" attrs="{'invisible': [('alias_domain', '!=', False)]}">
                                            <a type='action' name='%(action_open_settings)d' class="btn btn-link" role="button"><i class="fa fa-fw o_button_icon fa-arrow-right"/> Configure Email Servers</a>
                                        </div>
                                    </group>
                                    <group string="Posting" name="column_posting" groups="account.group_account_user,account.group_account_manager" attrs="{'invisible': [('type', 'not in', ['bank', 'cash'])]}">
                                        <field name="profit_account_id" options="{'no_create': True}" attrs="{'invisible': [('type', '!=', 'cash')]}"/>
                                        <field name="loss_account_id" options="{'no_create': True}" attrs="{'invisible': [('type', '!=', 'cash')]}"/>
                                        <field name="post_at" widget="radio" attrs="{'invisible': [('type', 'not in', ['bank', 'cash'])]}"/>
                                    </group>
                                    <group string="Control-Access" groups="account.group_account_manager">
                                        <div class="text-muted" colspan="2">Keep empty for no control</div>
                                        <field name="type_control_ids" widget="many2many_tags"/>
                                        <field name="account_control_ids" widget="many2many_tags"/>
                                        <field name="restrict_mode_hash_table" groups="account.group_account_user"/>
                                    </group>
                                    <group string="Payment Method Types" attrs="{'invisible': [('type', 'not in', ['bank', 'cash'])]}">
                                        <field name="inbound_payment_method_ids" widget="many2many_checkboxes"/>
                                        <field name="outbound_payment_method_ids" widget="many2many_checkboxes"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>

        <record id="view_account_bank_journal_tree" model="ir.ui.view">
            <field name="name">account.bank.journal.tree</field>
            <field name="model">account.journal</field>
            <field name="priority">10</field>
            <field name="arch" type="xml">
                <tree string="Account Journal">
                    <field name='sequence' widget='handle'/>
                    <field name="name"/>
                    <field name="bank_acc_number"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                </tree>
            </field>
        </record>
        <record id="account_bank_journal_view_kanban" model="ir.ui.view">
            <field name="name">account.bank.journal.kanban</field>
            <field name="model">account.journal</field>
            <field name="priority">10</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_content oe_kanban_global_click">
                                <div class="row">
                                    <div class="col-12">
                                        <strong><field name="name"/></strong>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        <record id="view_account_bank_journal_form" model="ir.ui.view">
            <field name="name">account.bank.journal.form</field>
            <field name="model">account.journal</field>
            <field name="priority">10</field>
            <field name="arch" type="xml">
                <form string="Bank Account">
                    <sheet>
                        <field name="type" invisible="1"/>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only" string="Bank Account Name"/>
                            <h1><field name="name"/></h1>
                        </div>
                        <group>
                            <group>
                                <field name="company_partner_id" invisible="1"/>
                                <field name="bank_account_id"/>
                                <field name="bank_acc_number" attrs="{'readonly': [('bank_account_id', '!=', False)], 'invisible':[('bank_account_id', '=', False)]}"/>
                                <field name="bank_id" attrs="{'readonly': [('bank_account_id', '!=', False)], 'invisible':[('bank_account_id', '=', False)]}"/>
                            </group>
                            <group>
                                <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                                <field name="currency_id" options="{'no_create': True}" groups="base.group_multi_currency"/>
                            </group>
                        </group>
                        <group>
                            <div name="advanced_info">
                                <group string="Payment Method Types">
                                    <field name="inbound_payment_method_ids" widget="many2many_checkboxes"/>
                                    <field name="outbound_payment_method_ids" widget="many2many_checkboxes"/>
                                </group>
                            </div>

                            <group name="bank_statement" string="Bank Statements" groups="account.group_account_user">
                                <field name="post_at"/>
                                <label for="bank_statements_source"/>
                                <div name="bank_source">
                                    <field name="bank_statements_source" widget="radio" attrs="{'required': [('type', '=', 'bank')]}"/>
                                </div>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="action_account_bank_journal_form" model="ir.actions.act_window">
            <field name="name">Bank Accounts</field>
            <field name="res_model">account.journal</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_account_bank_journal_tree')}),
                (0, 0, {'view_mode': 'kanban', 'view_id': ref('account_bank_journal_view_kanban')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_account_bank_journal_form')})]"/>
            <field name="domain">[('type', '=', 'bank')]</field>
            <field name="context">{'default_type': 'bank'}</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a bank account
              </p>
            </field>
        </record>
        <menuitem action="action_account_bank_journal_form" id="menu_action_account_invoice_bank_journal_form" parent="root_payment_menu" groups="account.group_account_invoice" sequence="2"/>

        <record id="view_company_partner_bank_form" model="ir.ui.view">
            <field name="name">company.res.partner.bank.form</field>
            <field name="model">res.partner.bank</field>
            <field name="inherit_id" ref="base.view_partner_bank_form"/>
            <field name="mode">primary</field>
            <field name="priority">20</field>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        <record id="action_new_bank_setting" model="ir.actions.server">
            <field name="name">Add a Bank Account</field>
            <field name="model_id" ref="model_res_company"/>
            <field name="state">code</field>
            <field name="code">
action = model.setting_init_bank_account_action()
            </field>
        </record>

        <menuitem action="action_new_bank_setting" id="menu_action_account_bank_journal_form" parent="root_payment_menu" groups="account.group_account_manager" sequence="1"/>

        <record id="action_account_journal_form" model="ir.actions.act_window">
            <field name="name">Journals</field>
            <field name="res_model">account.journal</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_account_journal_tree')}),
                (0, 0, {'view_mode': 'kanban', 'view_id': ref('account_journal_view_kanban')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_account_journal_form')})]"/>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Add a journal
              </p><p>
                A journal is used to record transactions of all accounting data
                related to the day-to-day business.
              </p>
            </field>
        </record>
        <menuitem action="action_account_journal_form" id="menu_action_account_journal_form" parent="account_invoicing_menu" sequence="5" groups="account.group_account_manager"/>

        <record id="action_account_journal_group_list" model="ir.actions.act_window">
            <field name="name">Journal Groups</field>
            <field name="res_model">account.journal.group</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Add a journal group
              </p><p>
                Journal group are used in reporting to display relevant data together.
              </p>
            </field>
        </record>
        <menuitem action="action_account_journal_group_list" id="menu_action_account_journal_group_list" parent="account_account_menu" sequence="2" groups="account.group_account_manager"/>

        <!-- Tags -->
        <record id="account_tag_view_form" model="ir.ui.view">
            <field name="name">Tags</field>
            <field name="model">account.account.tag</field>
            <field name="arch" type="xml">
                <form string="Tags">
                    <sheet>
                        <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                        <group>
                            <field name="active" invisible="1"/>
                            <field name="name"/>
                            <field name="applicability"/>
                            <field name="tax_negate" attrs="{'invisible': [('applicability', '!=', 'taxes')]}"/>
                            <field name="country_id" attrs="{'invisible': [('applicability', '!=', 'taxes')]}"/>
                            <field name="tax_report_line_ids" attrs="{'invisible': [('applicability', '!=', 'taxes')]}"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="account_tag_view_tree" model="ir.ui.view">
            <field name="name">Tags</field>
            <field name="model">account.account.tag</field>
            <field name="arch" type="xml">
                <tree string="Tags">
                    <field name="name"/>
                    <field name="applicability"/>
                </tree>
            </field>
        </record>

        <record id="account_tag_view_search" model="ir.ui.view">
            <field name="name">account.tag.view.search</field>
            <field name="model">account.account.tag</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <separator/>
                    <filter name="archived" string="Archived" domain="[('active', '=', False)]"/>
                </search>
            </field>
        </record>

        <record id="account_tag_action" model="ir.actions.act_window">
            <field name="name">Account Tags</field>
            <field name="res_model">account.account.tag</field>
            <field name="search_view_id" ref="account_tag_view_search"/>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Add a new tag
              </p>
            </field>
        </record>

        <!-- Bank statement -->

        <record id="view_account_bnk_stmt_cashbox" model="ir.ui.view">
            <field name="name">account.bnk_stmt_cashbox.form</field>
            <field name="model">account.bank.statement.cashbox</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <field name="start_bank_stmt_ids" invisible="1"/>
                        <field name="end_bank_stmt_ids" invisible="1"/>
                        <field name="currency_id" invisible="1"/>
                        <field name="cashbox_lines_ids" nolabel="1" context="{'default_currency_id': currency_id}">
                            <tree editable="bottom">
                                <field name="currency_id" invisible="1"/>
                                <field name="number"/>
                                <field name="coin_value" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                <field name="subtotal" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            </tree>
                        </field>
                        <div>
                            <group>
                                <group class="oe_subtotal_footer oe_right" cols="6">
                                    <field name="currency_id" invisible="1" />
                                    <div class="o_td_label"></div>
                                    <field name="total" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                </group>
                            </group>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_account_bnk_stmt_cashbox_footer" model="ir.ui.view">
            <field name="name">account.bnk_stmt_cashbox.form</field>
            <field name="model">account.bank.statement.cashbox</field>
            <field name="priority">1000</field>
            <field name="mode">primary</field>
            <field name="inherit_id" ref="view_account_bnk_stmt_cashbox"/>
            <field name="arch" type="xml">
                <xpath expr="//sheet" position="after">
                    <footer>
                        <button string="Confirm" class="btn-primary" special="save"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </xpath>
            </field>
        </record>

        <record id="view_account_bnk_stmt_check" model="ir.ui.view">
            <field name="name">account.bnk_stmt_check.form</field>
            <field name="model">account.bank.statement.closebalance</field>
            <field name="arch" type="xml">
                <form>
                <div>
                    <p>The closing balance is different than the computed one!</p>
                    <p>Confirming this will create automatically a journal entry with the difference in the profit/loss account set on the cash journal.</p>
                    <footer>
                        <button string="Confirm" name="validate" type="object" class="btn-primary"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </div>
                </form>
            </field>
        </record>

        <record id="action_view_account_bnk_stmt_check" model="ir.actions.act_window">
            <field name="name">Check Closing Balance</field>
            <field name="res_model">account.bank.statement.closebalance</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_account_bnk_stmt_check"/>
            <field name="target">new</field>
        </record>

        <record id="view_bank_statement_tree" model="ir.ui.view">
            <field name="name">account.bank.statement.tree</field>
            <field name="model">account.bank.statement</field>
            <field name="arch" type="xml">
                <tree decoration-danger="not is_difference_zero and state=='open'" decoration-info="state=='open' and is_difference_zero" string="Statements">
                    <field name="name"/>
                    <field name="date"/>
                    <field name="journal_id"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <field name="balance_start"/>
                    <field name="balance_end_real"/>
                    <field name="balance_end" invisible="1"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="state"/>
                    <field name="is_difference_zero" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="view_bank_statement_search" model="ir.ui.view">
            <field name="name">account.bank.statement.search</field>
            <field name="model">account.bank.statement</field>
            <field name="arch" type="xml">
                <search string="Search Bank Statements">
                    <field name="name" string="Bank Statement"/>
                    <field name="date"/>
                    <filter string="Draft" name="draft" domain="[('state','=','open')]"/>
                    <filter string="Confirmed" name="confirmed" domain="[('state','=','confirm')]"/>
                    <field name="journal_id" domain="[('type', '=', 'bank')]" />
                    <group expand="0" string="Group By">
                        <filter string="Journal" name="journal" context="{'group_by': 'journal_id'}"/>
                        <filter string="Status" name="status" context="{'group_by': 'state'}"/>
                        <filter string="Date" name="date" context="{'group_by': 'date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="view_bank_statement_form" model="ir.ui.view">
            <field name="name">account.bank.statement.form</field>
            <field name="model">account.bank.statement</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <form string="Bank Statement">
                <header>
                    <field name="all_lines_reconciled" invisible="1" />
                    <button name="action_bank_reconcile_bank_statements" string="Reconcile" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('all_lines_reconciled','=',True),('line_ids','=',[]),('state', '!=', 'open')]}"/>
                    <button name="check_confirm_bank" string="Validate" type="object" class="oe_highlight" attrs="{'invisible':['|','|',('all_lines_reconciled','=',False),('line_ids','=',[]),('state', '!=', 'open')]}"/>
                    <button name="button_reopen" states="confirm" string="Reset to New" type="object"/>
                    <button name="%(action_cash_box_out)d" string="Take Money In/Out" type="action" class="oe_highlight" attrs="{'invisible': [('journal_type','!=','cash')]}"/>
                    <field name="state" widget="statusbar" statusbar_visible="open,confirm"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button class="oe_stat_button" name="button_journal_entries"
                                string="Journal Entries" type="object"
                                attrs="{'invisible':[('move_line_count','=', 0)]}" icon="fa-bars" />
                        <field name="move_line_count" invisible="1"/>

                    </div>
                    <div class="oe_title oe_inline">
                        <label for="name" class="oe_edit_only"/>
                        <h1><field name="name"/></h1>
                    </div>
                    <group>
                        <group>
                            <field name="journal_type" invisible="1"/>
                            <field name="cashbox_start_id" invisible="1"/>
                            <field name="cashbox_end_id" invisible="1"/>
                            <field name="journal_id" domain="[('type', '=', journal_type)]" attrs="{'readonly': [('move_line_count','!=', 0)]}" widget="selection"/>
                            <field name="date" options="{'datepicker': {'warn_future': true}}" />
                            <field name="accounting_date" groups="base.group_no_one"/>
                            <field name='company_id' options="{'no_create': True}" groups="base.group_multi_company" />
                            <field name="currency_id" invisible="1"/>
                        </group><group>
                            <label for="balance_start"/>
                            <div>
                                <field class="oe_inline" name="balance_start"/>
                                <button name="open_cashbox_id" attrs="{'invisible': ['|','|',('state','!=','open'),('journal_type','!=','cash')]}" string="&#8594; Count" type="object" class="oe_edit_only oe_link oe_inline" context="{'balance':'start'}"/>
                            </div>
                            <label for="balance_end_real"/>
                            <div>
                                <field class="oe_inline" name="balance_end_real"/>
                                <button name="open_cashbox_id" attrs="{'invisible': ['|','|',('state','!=','open'),('journal_type','!=','cash')]}" string="&#8594; Count" type="object" class="oe_edit_only oe_link oe_inline" context="{'balance':'close'}"/>
                            </div>
                        </group>
                    </group>

                    <notebook>
                        <page string="Transactions" name="statement_line_ids">
                            <field name="line_ids" context="{'date':date}">
                                <tree editable="bottom" string="Statement lines" decoration-muted="journal_entry_ids" limit="500">
                                    <field name="sequence"  widget="handle"/>
                                    <field name="journal_entry_ids" invisible="1"/>
                                    <field name="date" attrs="{'readonly' : [('journal_entry_ids', '!=', [])] }"/>
                                    <field name="name" attrs="{'readonly' : [('journal_entry_ids', '!=', [])] }"/>
                                    <field name="partner_id" domain="['|',('parent_id','=',False),('is_company','=',True)]"
                                        attrs="{'readonly' : [('journal_entry_ids', '!=', [])] }"/>
                                    <field name="ref" attrs="{'readonly' : [('journal_entry_ids', '!=', [])] }" groups="base.group_no_one"/>
                                    <field name="transaction_type" attrs="{'readonly' : [('journal_entry_ids', '!=', [])] }" optional="hidden"/>
                                    <field name="note" optional="hidden"/>
                                    <field name="amount" attrs="{'readonly' : [('journal_entry_ids', '!=', [])] }"/>
                                    <field name="journal_currency_id" invisible="1"/>
                                    <field name="bank_account_id" invisible="1" />
                                    <field name="account_number" optional="hidden"/>
                                    <field name="amount_currency" optional="hidden"/>
                                    <field name="currency_id" optional="hidden"/>
                                    <field name="state" invisible="1"/>
                                    <button name="button_cancel_reconciliation" attrs="{'invisible': ['|',('journal_entry_ids', '=', []), ('state', '=', 'confirm')]}" string="Revert reconciliation" type="object" icon="fa-undo"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                    <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                        <div class="oe_subtotal_footer_separator oe_inline">
                            <label for="balance_end" />
                        </div>
                        <field name="balance_end" nolabel="1" class="oe_subtotal_footer_separator"/>
                    </group>
                    <div class="oe_clear"/>
                </sheet>
                <div class="o_attachment_preview"/>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>

        <record id="action_bank_statement_tree" model="ir.actions.act_window">
            <field name="name">Bank Statements</field>
            <field name="res_model">account.bank.statement</field>
            <field name="view_mode">tree,form,pivot,graph</field>
            <field name="domain">[('journal_id.type', '=', 'bank')]</field>
            <field name="context">{'journal_type':'bank'}</field>
            <field name="search_view_id" ref="view_bank_statement_search"/>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Register a bank statement
              </p><p>
                A bank statement is a summary of all financial transactions
                occurring over a given period of time on a bank account. You
                should receive this periodicaly from your bank.
              </p><p>
                Odoo allows you to reconcile a statement line directly with
                the related sale or puchase invoices.
              </p>
            </field>
        </record>
        <record model="ir.actions.act_window.view" id="action_bank_statement_tree_bank">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_bank_statement_tree"/>
            <field name="act_window_id" ref="action_bank_statement_tree"/>
        </record>
        <record model="ir.actions.act_window.view" id="action_bank_statement_form_bank">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_bank_statement_form"/>
            <field name="act_window_id" ref="action_bank_statement_tree"/>
        </record>

        <record id="view_bank_statement_line_search" model="ir.ui.view">
            <field name="name">account.bank.statement.line.search</field>
            <field name="model">account.bank.statement.line</field>
            <field name="arch" type="xml">
                <search string="Search Bank Statements Line">
                    <field name="name"/>
                    <field name="statement_id"/>
                    <field name="partner_id"/>
                    <field name="date"/>
                    <field name="journal_id" domain="[('type', 'in', ('bank', 'cash'))]" />
                    <field name="note"/>
                    <field name="transaction_type"/>
                </search>
            </field>
        </record>

        <record id="view_bank_statement_line_form" model="ir.ui.view">
            <field name="name">bank.statement.line.form</field>
            <field name="model">account.bank.statement.line</field>
            <field name="priority">8</field>
            <field name="arch" type="xml">
            <form string="Statement Line" create="false">
                <group col="4">
                    <field name="statement_id"/>
                    <field name="date"/>
                    <field name="name"/>
                    <field name="ref"/>
                    <field name="partner_id"/>
                    <field name="amount"/>
                    <field name="journal_currency_id" invisible="1"/>
                    <field name="sequence"/>
                    <field name="note"/>
                    <field name="transaction_type"/>
                </group>
            </form>
            </field>
        </record>
        <record id="view_bank_statement_line_tree" model="ir.ui.view">
            <field name="name">account.bank.statement.line.tree</field>
            <field name="model">account.bank.statement.line</field>
            <field name="priority">8</field>
            <field name="arch" type="xml">
                <tree string="Statement lines" create="false">
                    <field name="sequence" readonly="1" invisible="1"/>
                    <field name="statement_id" />
                    <field name="journal_id" invisible="1" />
                    <field name="date"/>
                    <field name="name"/>
                    <field name="ref" groups="base.group_no_one"/>
                    <field name="partner_id"/>
                    <field name="amount"/>
                    <field name="transaction_type" optional="hidden"/>
                    <field name="note" optional="hidden"/>
                    <field name="journal_currency_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="action_bank_statement_line" model="ir.actions.act_window">
            <field name="name">Bank Statement Lines</field>
            <field name="res_model">account.bank.statement.line</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="search_view_id" ref="view_bank_statement_line_search"/>
            <field name="help" type="html">
              <p class="o_view_nocontent_empty_folder">
                A bank statement line is a financial transaction on a bank account
              </p><p>
                Odoo allows you to reconcile a statement line directly with
                the related sale or puchase invoice(s).
              </p>
            </field>
        </record>

        <record id="action_bank_statement_draft_tree" model="ir.actions.act_window">
            <field name="name">Draft statements</field>
            <field name="res_model">account.bank.statement</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('state','=','draft')]</field>
            <field name="filter" eval="True"/>
        </record>

        <record id="action_bank_reconcile" model="ir.actions.client">
            <field name="name">Reconciliation on Bank Statements</field>
            <field name="res_model">account.bank.statement.line</field>
            <field name="tag">bank_statement_reconciliation_view</field>
        </record>

        <record id="view_account_reconcile_model_form" model="ir.ui.view">
            <field name="name">account.reconcile.model.form</field>
            <field name="model">account.reconcile.model</field>
            <field name="arch" type="xml">
                <form string="Operation Templates">
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button type="object" name="action_reconcile_stat"
                              class="oe_stat_button" icon="fa-book">
                                <field name="number_entries" string="Journal Entries" widget="statinfo"/>
                            </button>
                        </div>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only"/>
                            <h1><field name="name" placeholder="e.g. Bank Fees"/></h1>
                        </div>
                        <group>
                            <group>
                                <field name="rule_type" widget="radio"/>
                            </group>
                            <group>
                                <field name="auto_reconcile" attrs="{'invisible': [('rule_type', '=', 'writeoff_button')]}"/>
                                <field name="to_check" attrs="{'invisible': [('rule_type', '!=', 'writeoff_button')]}"/>
                            </group>
                        </group>
                        <group string="Conditions on Bank Statement Line">
                            <group>
                                <field name="match_journal_ids"
                                       options="{'no_create': True}"
                                       widget="many2many_tags"/>
                                <field name="match_nature" widget="radio"
                                       attrs="{'invisible': [('rule_type', '=', 'writeoff_button')]}"/>
                            </group>
                            <group attrs="{'invisible': [('rule_type', '=', 'writeoff_button')]}">
                                <label for="match_amount"/>
                                <div>
                                    <field name="match_amount" style="width: 30% !important" class="oe_inline"/>
                                    <span class="o_form_label" style="width: 2% !important">   </span> <!-- Make a little space. -->
                                    <field name="match_amount_min" style="width: 30% !important;" class="oe_inline"
                                           attrs="{'invisible': [('match_amount', 'in', (False, 'lower'))], 'required': [('match_amount', '!=', False)]}"/>
                                    <span class="o_form_label"
                                          attrs="{'invisible': [('match_amount', '!=', 'between')]}">and</span>
                                    <field name="match_amount_max" style="width: 30% !important;" class="oe_inline"
                                           attrs="{'invisible': [('match_amount', 'in', (False, 'greater'))], 'required': [('match_amount', '=', 'between')]}"/>
                                </div>
                                <label for="match_label"/>
                                <div>
                                    <field name="match_label" style="width: 30% !important" class="oe_inline"/>
                                    <span class="o_form_label" style="width: 2% !important">   </span> <!-- Make a little space. -->
                                    <field name="match_label_param" style="width: 68% !important;" class="oe_inline"
                                           attrs="{'invisible': [('match_label', '=', False)], 'required': [('match_label', '!=', False)]}"/>
                                </div>
                                <label for="match_note"/>
                                <div>
                                    <field name="match_note" style="width: 30% !important" class="oe_inline"/>
                                    <span class="o_form_label" style="width: 2% !important">   </span> <!-- Make a little space. -->
                                    <field name="match_note_param" style="width: 68% !important;" class="oe_inline"
                                           attrs="{'invisible': [('match_note', '=', False)], 'required': [('match_note', '!=', False)]}"/>
                                </div>
                                <label for="match_transaction_type"/>
                                <div>
                                    <field name="match_transaction_type" style="width: 30% !important" class="oe_inline"/>
                                    <span class="o_form_label" style="width: 2% !important">   </span> <!-- Make a little space. -->
                                    <field name="match_transaction_type_param" style="width: 68% !important;" class="oe_inline"
                                           attrs="{'invisible': [('match_transaction_type', '=', False)], 'required': [('match_transaction_type', '!=', False)]}"/>
                                </div>
                                <field name="match_same_currency" attrs="{'invisible': [('rule_type', '!=', 'invoice_matching')]}"/>
                                <label for="match_total_amount"
                                       attrs="{'invisible': [('rule_type', '!=', 'invoice_matching')]}"/>
                                <div attrs="{'invisible': [('rule_type', '!=', 'invoice_matching')]}">
                                    <field name="match_total_amount" class="oe_inline"/>
                                    <field name="match_total_amount_param" class="oe_inline"
                                           attrs="{'invisible': [('match_total_amount', '=', False)]}"/>
                                    <span class="o_form_label oe_inline"
                                          attrs="{'invisible': [('match_total_amount', '=', False)]}">%</span>
                                    <div class="text-muted" attrs="{'invisible': ['|', ('rule_type', '!=', 'invoice_matching'), ('match_total_amount', '=', False)]}">
                                    This parameter will be bypassed in case of a statement line communication matching exactly existing entries</div>
                                </div>
                            </group>
                            <group attrs="{'invisible': [('rule_type', '=', 'writeoff_button')]}">
                                <field name="match_partner"
                                       attrs="{'invisible': [('rule_type', '!=', 'writeoff_suggestion')]}"/>
                                <field name="match_partner"
                                       string="Partner Is Set &amp; Matches"
                                       attrs="{'invisible': [('rule_type', '!=', 'invoice_matching')]}"/>
                                <label for="match_partner_ids" class="ml16"
                                       attrs="{'invisible': [('match_partner', '=', False)]}"/>
                                <field name="match_partner_ids" nolabel="1"
                                       widget="many2many_tags"
                                       attrs="{'invisible': [('match_partner', '=', False)]}"/>
                                <label for="match_partner_category_ids" class="ml16"
                                       attrs="{'invisible': [('match_partner', '=', False)]}"/>
                                <field name="match_partner_category_ids" nolabel="1"
                                       widget="many2many_tags"
                                       attrs="{'invisible': [('match_partner', '=', False)]}"/>
                            </group>
                        </group>
                        <group string="Counterpart Values"
                               attrs="{'invisible': [('rule_type', '=', 'invoice_matching'), '|', ('match_total_amount', '=', False), '&amp;', ('match_total_amount', '=', True), ('match_total_amount_param', '=', 100.0)]}">
                            <group>
                                <field name="account_id" options="{'no_create': True}" domain="[('company_id', '=', company_id)]"
                                       attrs="{'required': ['|', ('rule_type', '!=', 'invoice_matching'), '&amp;', '&amp;', ('rule_type', '=', 'invoice_matching'), ('match_total_amount', '=', True), ('match_total_amount_param', '!=', 100.0)]}"/>
                                <field name="amount_type"/>
                                <field name="tax_ids"
                                       domain="[('company_id', '=', company_id)]"
                                       options="{'no_create': True}"
                                       context="{'append_type_to_tax_name': True}"
                                       widget="many2many_tags"/>
                                <field name="show_force_tax_included" invisible="1"/>
                                <field name="force_tax_included"
                                       attrs="{'invisible': [('show_force_tax_included', '=', False)]}" force_save="1"/>
                                <field name="analytic_account_id" domain="['|', ('company_id', '=', company_id), ('company_id', '=', False)]" groups="analytic.group_analytic_accounting"/>
                                <field name="analytic_tag_ids" groups="analytic.group_analytic_tags" widget="many2many_tags"/>
                                <field name="company_id" groups="base.group_multi_company"/>
                            </group>
                            <group>
                                <field name="label"/>
                                <label for="amount" attrs="{'invisible': [('amount_type','=','regex')]}"/>
                                <div attrs="{'invisible': [('amount_type','=','regex')]}">
                                    <field name="amount" class="oe_inline"/>
                                    <span class="o_form_label oe_inline" attrs="{'invisible':[('amount_type','!=','percentage')]}">%</span>
                                </div>
                                <field name="amount_from_label_regex" attrs="{'invisible': [('amount_type','!=','regex')]}"/>
                                <field name="decimal_separator" attrs="{'invisible': [('amount_type','!=','regex')]}"/>
                                <field name="journal_id" domain="[('type', '=', 'general'), ('company_id', '=', company_id)]" widget="selection"
                                       attrs="{'invisible': [('rule_type', '!=', 'writeoff_button')]}"/>
                            </group>
                        </group>
                        <div class="oe_edit_only"
                             attrs="{'invisible': [('rule_type', '=', 'invoice_matching'), '|', ('match_total_amount', '=', False), '&amp;', ('match_total_amount', '=', True), ('match_total_amount_param', '=', 100.0)]}">
                            <field name="has_second_line" />
                            <label for="has_second_line" string="Add a second line"/>
                        </div>
                        <group name="second_line" attrs="{'invisible':['|', ('has_second_line', '=', False), '&amp;', ('rule_type', '=', 'invoice_matching'), '|', ('match_total_amount', '=', False), '&amp;', ('match_total_amount', '=', True), ('match_total_amount_param', '=', 100.0)]}">
                            <group>
                                <field name="second_account_id" options="{'no_create': True}" string="Account" domain="[('company_id', '=', company_id)]"
                                       attrs="{'required': [('has_second_line', '=', True), '|', ('rule_type', '!=', 'invoice_matching'), '&amp;', '&amp;', ('rule_type', '=', 'invoice_matching'), ('match_total_amount', '=', True), ('match_total_amount_param', '!=', 100.0)]}"/>
                                <field name="second_amount_type" string="Amount type"/>
                                <field name="second_tax_ids"
                                       string="Taxes"
                                       domain="[('company_id', '=', company_id)]"
                                       widget="many2many_tags"
                                       context="{'append_type_to_tax_name': True}"/>
                                <field name="show_second_force_tax_included" invisible="1"/>
                                <field name="force_second_tax_included"
                                       attrs="{'invisible': [('show_second_force_tax_included', '=', False)]}" force_save="1"/>
                                <field name="second_analytic_account_id" domain="['|', ('company_id', '=', company_id), ('company_id', '=', False)]" string="Analytic Account" groups="analytic.group_analytic_accounting"/>
                                <field name="second_analytic_tag_ids" groups="analytic.group_analytic_tags" widget="many2many_tags"/>
                            </group>
                            <group>
                                <field name="second_label" string="Journal Item Label"/>
                                <label for="second_amount" string="Amount" attrs="{'invisible': [('second_amount_type', '=', 'regex')]}"/>
                                <div attrs="{'invisible': [('second_amount_type', '=', 'regex')]}">
                                    <field name="second_amount" class="oe_inline"/>
                                    <span class="o_form_label oe_inline" attrs="{'invisible':[('second_amount_type','!=','percentage')]}">%</span>
                                </div>
                                <field name="second_amount_from_label_regex" attrs="{'invisible': [('second_amount_type','!=','regex')]}"/>
                                <field name="second_journal_id" string="Journal" domain="[('type', '=', 'general'), ('company_id', '=', company_id)]" widget="selection"
                                       attrs="{'invisible': [('rule_type', '!=', 'writeoff_button')]}"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="view_account_reconcile_model_tree" model="ir.ui.view">
            <field name="name">account.reconcile.model.tree</field>
            <field name="mo